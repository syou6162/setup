#!/bin/bash
set -euxo pipefail

target=~/.files

tools/git-clone https://github.com/syou6162/config "${target}"

# $HOME以下に設定ファイル群へのシンボリックリンクを貼る
for filename in .zshrc .zshenv .zprofile .gitconfig .gitexclude .vimrc .tigrc .tmux.conf; do
  tools/make-symlink "${target}/${filename}" ~/"${filename}"
done

tools/make-symlink "${target}/.ssh/config" "${HOME}"/.ssh/config

tools/make-symlink "${target}/config.fish" "${HOME}"/.config/fish/config.fish
tools/make-symlink "${target}/fish_plugins" "${HOME}"/.config/fish/fish_plugins

tools/make-symlink "${target}/vscode/keybindings.json" "${HOME}/Library/Application Support/Code/User/keybindings.json"
tools/make-symlink "${target}/vscode/settings.json" "${HOME}/Library/Application Support/Code/User/settings.json"

tools/make-symlink "${target}/init.lua" "${HOME}/.hammerspoon/init.lua"

tools/make-symlink "${target}/karabiner.json" "${HOME}/.config/karabiner/karabiner.json"

# .config/claude配下に揃えたいが、以下が解決するまで様子見
# ref: https://github.com/anthropics/claude-code/issues/1455
tools/make-symlink "${target}/claude/CLAUDE.md" "${HOME}/.claude/CLAUDE.md"
tools/make-symlink "${target}/claude/settings.json" "${HOME}/.claude/settings.json"

tools/make-symlink "${target}/claude/cchook_config.yaml" "${HOME}/.config/cchook/config.yaml"
tools/make-symlink "${target}/claude/ccstatusline_config.yaml" "${HOME}/.config/ccstatusline/config.yaml"
